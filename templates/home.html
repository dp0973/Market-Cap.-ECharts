<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 다운받은 echarts 파일 -->
    <script type="text/javascript"
    src="{{ url_for('static', filename='echarts.js') }}"></script>
</head>

<body>
<!-- 높이와 너비가 지정된 Dom 을 생성합니다 -->
<div id="main" style="width: 1800px;height:1200px;"></div>
    
    <script type="text/javascript">
      var chartDom = document.getElementById('main');
var myChart = echarts.init(chartDom);
var option;
var names = {{names|tojson}};
var caps = {{caps|tojson}};
var arr = [];
for (var i=0; i<names.length; i++) {
    var item = {value: caps[i], name: names[i]};
    arr.push(item);
}
option = {
    title: {
        text: 'KOSPI 시가총액',
        left: 'center'
    },
    tooltip: {
        trigger: 'item',
        formatter: '{b} : {c} ({d}%)'
    },
    series: [
        {
            type: 'pie',
            radius: '65%',
            center: ['50%', '40%'],
            selectedMode: 'single',
            data: arr,
            emphasis: {
                itemStyle: {
                    shadowBlur: 10,
                    shadowOffsetX: 0,
                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                }
            }
        }
    ]
};

    myChart.setOption(option);
    </script>
    {{names|tojson}}<br>{{caps|tojson}}
    </body>
</html>